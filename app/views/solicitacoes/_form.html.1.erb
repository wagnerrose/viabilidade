<%- model_class = Solicitacao -%>
<% @opcao_status = ["Em Análise", "Viável", "Inviável", "Análise Eletrosul"] %>

<div class="quadroBotoes">
  <div>
    <%= link_to t('.back', :default => t("helpers.links.back")),
                  solicitacoes_path, :class => 'btn botao btn-sm btn-block'  %>
  </div><!-- div botao back -->
  <div>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
                  edit_solicitacao_path(@solicitacao), :class => 'btn botao btn-sm btn-block' %>
  </div><!-- div botao edit -->
  <div>
    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                  solicitacao_path(@solicitacao),
                  :method => 'delete',
                  :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                  :class => 'btn botaoApaga btn-sm btn-block' %>
  </div>
</div> <!-- div quadrobotoes -->
    
<div class="quadroSolicitacao">
  <%= form_for @solicitacao do |f| %>
    <% if @solicitacao.errors.any? %>
      <div id="error_expl" class="panel panel-danger">
        <div class="panel-heading">
          <h3 class="panel-title"><%= pluralize(@solicitacao.errors.count, "error") %> prohibited this equipamento from being saved:</h3>
        </div>
        <div class="panel-body">
          <ul>
            <% @solicitacao.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
      </div><!-- error -->
    <% end %>
    
    <div class="row">
      <div class='campoEntrada'>
        <%= f.label :numero_vt, class: 'campoRotulo' %>
        <%= f.text_field :numero_vt,
            class: 'campoVt',
            disabled: true %>
      </div>
      <%= f.error_span(:numero_vt) %>
      
      <div class="campoEntrada ">
        <%= f.label :empresa_id, class: 'campoRotulo'%>
        <%= f.collection_select :empresa_id, @empresa_options_for_select, 
                                :id, :razao,
                                { include_blank: true },
                                { class: 'campoEmpresa'} %>
      </div>
      <%= f.error_span(:empresa_id) %>
      
      <div class="campoEntrada">
        <%= f.label :data_solicitacao, class: 'campoRotulo' %>
        <%= f.text_field :data_solicitacao,
            {  class: 'campoDataSolicitacao'} %>
      </div>
      <%= f.error_span(:data_solicitacao) %>      
    </div><!--/row-->
  
    <div class="row">
      <div class="campoEntrada">
        <%= f.label :solicitante, class: 'campoRotulo' %>
        <%= f.collection_select :solicitante, 
                  @solicitante_options_for_select, 
                  :nome, :nome, 
                  { include_blank: true},
                  { class: 'campoSolicitante'} %>
      </div>    
      <%=f.error_span(:solicitante) %>
      
      <div class="campoEntrada">
        <%= f.label :analista, class: 'campoRotulo'  %>
        <%= f.collection_select :analista, 
                    @analista_options_for_select, 
                    :nome, :nome,
                    { include_blank: false },
                    { class: 'campoAnalista'} %>
      </div>
      <%= f.error_span(:analista) %>

        <div class="campoEntrada">
          <%= f.label :servico, class: 'campoRotulo'  %>
          <%= f.collection_select :servico, 
                  @servico_options_for_select, 
                  :nome, :nome, 
                  { include_blank: true},
                  { class: 'campoServico'} %>
        </div>
        <%=f.error_span(:servico) %>
          
        <div class="campoEntrada">
          <%= f.label :banda, class: 'campoRotulo' %>
          <%= f.number_field :banda,
                { class: 'campoBanda'} %>
        </div>
        <%= f.error_span(:banda) %>
        
    </div><!-- row -->
    
    <div class="row">
      <div class="campoEntrada">
        <%= f.label :endereco_a, class: 'campoRotulo'  %>
        <%= f.text_field :endereco_a,
                   { class: 'campoEndereco'}%>
      </div>
      <%= f.error_span(:endereco_a) %>
      
      <div class="campoEntrada">    
        <%= f.label :uf_a, class: 'campoRotulo'  %>
        <%= f.collection_select :uf_a, 
              @uf_options_for_select, 
              :sigla, :sigla,
              { include_blank: true },
              { class: 'campoEstado'}  %>
      </div>
      <%=f.error_span(:uf_a) %>
  
      <div class="campoEntrada">
        <%= f.label :localidade_a, class: 'campoRotulo' %>
        <%= f.grouped_collection_select :localidade_a, 
            @uf_options_for_select, 
            :localidades, :sigla, :municipio, :municipio,
            { include_blank: true },
            { class: 'campoLocalidade'} %>
      </div>
      <%= f.error_span(:localidade_a) %>
    </div><!--/row-->  
  
    <div class="row">
      <div class="campoEntrada">
        <%= f.label :endereco_b, class: 'campoRotulo'  %>
        <%= f.text_field :endereco_b,
               { class: 'campoEndereco'} %>
      </div>
      <%= f.error_span(:endereco_b) %>
      
      <div class="campoEntrada">
        <%= f.label :uf_b, class: 'campoRotulo'  %>
        <%= f.collection_select :uf_b, 
                    @uf_options_for_select, 
                    :sigla, :sigla, 
                    { include_blank: true }, 
                    { class: 'campoEstado'} %>
       </div>
      <%= f.error_span(:uf_b) %>
  
      <div class="campoEntrada">   
        <%= f.label :localidade_b, class: 'campoRotulo'  %>
        <%= f.grouped_collection_select :localidade_b, 
                  @uf_options_for_select, 
                  :localidades, :sigla, :municipio, :municipio,
                  { include_blank: true },
                  {class: 'campoLocalidade'} %>
      </div><!--/localidade_b-->
      <%= f.error_span(:localidade_b) %> 
    </div><!--/row-->
  </div><!-- div quadro solicitacao -->

  <div class="quadroRespostas">
    <div><h1 class="list-group-item-success" sytle="clear: both;"><center>Análise Viabilidade</center></h1></div>
    <div class='container' style='padding: 0px' >
      <div class="row">
        <strong>
          <div class='col-sm-1 ' ><center>Tipo</center></div>        
          <div class='col-sm-1 '>Estrutura</div> 
          <div class='col-sm-4 '>Descrição</div>        
          <div class='col-sm-1 '>Prazo</div>
          <div class='col-sm-1 '>Capex</div> 
          <div class='col-sm-1 '>Opex Inst</div> 
          <div class='col-sm-1 '>Opex Mês</div>
          <div class='col-sm-1 '>Resultado</div>             
          <div class='col-sm-1 '>Ação</div>
        </strong>
      </div><!-- row -->
      <hr class="linha">
      <div id="respostas">
        <%= f.fields_for :respostas do |respostas_fields| %>
          <%= render partial: "resposta_fields", locals: { f: respostas_fields } %>
        <% end %>
        <center>
          <%= link_to_add_association '<button class="botao glyphicon glyphicon-plus" title="Incluir recurso">Incluir</button>'.html_safe, f, :respostas %>
        </center>
      </div><!-- respostas -->
    </div><!--/container-->
  </div> <!-- quadro respostas -->
  <% end %>
